(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5ee771b0"],{1246:function(e,t,i){"use strict";!function(e,t){function i(t,i,n){e.WeixinJSBridge?WeixinJSBridge.invoke(t,o(i),function(e){a(t,e,n)}):u(t,n)}function n(t,i,n){e.WeixinJSBridge?WeixinJSBridge.on(t,function(e){n&&n.trigger&&n.trigger(e),a(t,e,i)}):u(t,n||i)}function o(e){return e=e||{},e.appId=C.appId,e.verifyAppId=C.appId,e.verifySignType="sha1",e.verifyTimestamp=C.timestamp+"",e.verifyNonceStr=C.nonceStr,e.verifySignature=C.signature,e}function s(e){return{timeStamp:e.timestamp+"",nonceStr:e.nonceStr,package:e.package,paySign:e.paySign,signType:e.signType||"SHA1"}}function a(e,t,i){var n,o;switch(delete t.err_code,delete t.err_desc,delete t.err_detail,n=t.errMsg,n||(n=t.err_msg,delete t.err_msg,n=c(e,n,i),t.errMsg=n),i=i||{},i._complete&&(i._complete(t),delete i._complete),n=t.errMsg||"",C.debug&&!i.isInnerInvoke&&alert(JSON.stringify(t)),o=n.indexOf(":"),n.substring(o+1)){case"ok":i.success&&i.success(t);break;case"cancel":i.cancel&&i.cancel(t);break;default:i.fail&&i.fail(t)}i.complete&&i.complete(t)}function c(e,t){var i,n,o,s;if(t){switch(i=t.indexOf(":"),e){case m.config:n="config";break;case m.openProductSpecificView:n="openProductSpecificView";break;default:n=t.substring(0,i),n=n.replace(/_/g," "),n=n.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),n=n.substring(0,1).toLowerCase()+n.substring(1),n=n.replace(/ /g,""),-1!=n.indexOf("Wcpay")&&(n=n.replace("Wcpay","WCPay")),o=g[n],o&&(n=o)}s=t.substring(i+1),"confirm"==s&&(s="ok"),"failed"==s&&(s="fail"),-1!=s.indexOf("failed_")&&(s=s.substring(7)),-1!=s.indexOf("fail_")&&(s=s.substring(5)),s=s.replace(/_/g," "),s=s.toLowerCase(),("access denied"==s||"no permission to execute"==s)&&(s="permission denied"),"config"==n&&"function not exist"==s&&(s="ok"),t=n+":"+s}return t}function r(e){var t,i,n,o;if(e){for(t=0,i=e.length;i>t;++t)n=e[t],o=m[n],o&&(e[t]=o);return e}}function u(e,t){if(!(!C.debug||t&&t.isInnerInvoke)){var i=g[e];i&&(e=i),t&&t._complete&&delete t._complete,console.log('"'+e+'",',t||"")}}function d(){if(!("6.0.2">w||I.systemType<0)){var e=new Image;I.appId=C.appId,I.initTime=k.initEndTime-k.initStartTime,I.preVerifyTime=k.preVerifyEndTime-k.preVerifyStartTime,x.getNetworkType({isInnerInvoke:!0,success:function(t){I.networkType=t.networkType;var i="https://open.weixin.qq.com/sdk/report?v="+I.version+"&o="+I.isPreVerifyOk+"&s="+I.systemType+"&c="+I.clientVersion+"&a="+I.appId+"&n="+I.networkType+"&i="+I.initTime+"&p="+I.preVerifyTime+"&u="+I.url;e.src=i}})}}function p(){return(new Date).getTime()}function l(t){_&&(e.WeixinJSBridge?t():h.addEventListener&&h.addEventListener("WeixinJSBridgeReady",t,!1))}function f(){x.invoke||(x.invoke=function(t,i,n){e.WeixinJSBridge&&WeixinJSBridge.invoke(t,o(i),n)},x.on=function(t,i){e.WeixinJSBridge&&WeixinJSBridge.on(t,i)})}var m,g,h,v,y,_,S,b,w,k,I,C,T,M,x;if(!e.jWeixin)m={config:"preVerifyJSAPI",onMenuShareTimeline:"menu:share:timeline",onMenuShareAppMessage:"menu:share:appmessage",onMenuShareQQ:"menu:share:qq",onMenuShareWeibo:"menu:share:weiboApp",onMenuShareQZone:"menu:share:QZone",previewImage:"imagePreview",getLocation:"geoLocation",openProductSpecificView:"openProductViewWithPid",addCard:"batchAddCard",openCard:"batchViewCard",chooseWXPay:"getBrandWCPayRequest"},g=function(){var e,t={};for(e in m)t[m[e]]=e;return t}(),h=e.document,v=h.title,y=navigator.userAgent.toLowerCase(),_=-1!=y.indexOf("micromessenger"),S=-1!=y.indexOf("android"),b=-1!=y.indexOf("iphone")||-1!=y.indexOf("ipad"),w=function(){var e=y.match(/micromessenger\/(\d+\.\d+\.\d+)/)||y.match(/micromessenger\/(\d+\.\d+)/);return e?e[1]:""}(),k={initStartTime:p(),initEndTime:0,preVerifyStartTime:0,preVerifyEndTime:0},I={version:1,appId:"",initTime:0,preVerifyTime:0,networkType:"",isPreVerifyOk:1,systemType:b?1:S?2:-1,clientVersion:w,url:encodeURIComponent(location.href)},C={},T={_completes:[]},M={state:0,res:{}},l(function(){k.initEndTime=p()}),x={config:function(e){C=e,u("config",e);var t=!1!==C.check;l(function(){var e,n,o;if(t)i(m.config,{verifyJsApiList:r(C.jsApiList)},function(){T._complete=function(e){k.preVerifyEndTime=p(),M.state=1,M.res=e},T.success=function(){I.isPreVerifyOk=0},T.fail=function(e){T._fail?T._fail(e):M.state=-1};var e=T._completes;return e.push(function(){C.debug||d()}),T.complete=function(){for(var t=0,i=e.length;i>t;++t)e[t]();T._completes=[]},T}()),k.preVerifyStartTime=p();else{for(M.state=1,e=T._completes,n=0,o=e.length;o>n;++n)e[n]();T._completes=[]}}),C.beta&&f()},ready:function(e){0!=M.state?e():(T._completes.push(e),!_&&C.debug&&e())},error:function(e){"6.0.2">w||(-1==M.state?e(M.res):T._fail=e)},checkJsApi:function(e){var t=function(e){var t,i,n=e.checkResult;for(t in n)i=g[t],i&&(n[i]=n[t],delete n[t]);return e};i("checkJsApi",{jsApiList:r(e.jsApiList)},function(){return e._complete=function(e){if(S){var i=e.checkResult;i&&(e.checkResult=JSON.parse(i))}e=t(e)},e}())},onMenuShareTimeline:function(e){n(m.onMenuShareTimeline,{complete:function(){i("shareTimeline",{title:e.title||v,desc:e.title||v,img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareAppMessage:function(e){n(m.onMenuShareAppMessage,{complete:function(){i("sendAppMessage",{title:e.title||v,desc:e.desc||"",link:e.link||location.href,img_url:e.imgUrl||"",type:e.type||"link",data_url:e.dataUrl||""},e)}},e)},onMenuShareQQ:function(e){n(m.onMenuShareQQ,{complete:function(){i("shareQQ",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareWeibo:function(e){n(m.onMenuShareWeibo,{complete:function(){i("shareWeiboApp",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},onMenuShareQZone:function(e){n(m.onMenuShareQZone,{complete:function(){i("shareQZone",{title:e.title||v,desc:e.desc||"",img_url:e.imgUrl||"",link:e.link||location.href},e)}},e)},startRecord:function(e){i("startRecord",{},e)},stopRecord:function(e){i("stopRecord",{},e)},onVoiceRecordEnd:function(e){n("onVoiceRecordEnd",e)},playVoice:function(e){i("playVoice",{localId:e.localId},e)},pauseVoice:function(e){i("pauseVoice",{localId:e.localId},e)},stopVoice:function(e){i("stopVoice",{localId:e.localId},e)},onVoicePlayEnd:function(e){n("onVoicePlayEnd",e)},uploadVoice:function(e){i("uploadVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadVoice:function(e){i("downloadVoice",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},translateVoice:function(e){i("translateVoice",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},chooseImage:function(e){i("chooseImage",{scene:"1|2",count:e.count||9,sizeType:e.sizeType||["original","compressed"],sourceType:e.sourceType||["album","camera"]},function(){return e._complete=function(e){if(S){var t=e.localIds;t&&(e.localIds=JSON.parse(t))}},e}())},previewImage:function(e){i(m.previewImage,{current:e.current,urls:e.urls},e)},uploadImage:function(e){i("uploadImage",{localId:e.localId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},downloadImage:function(e){i("downloadImage",{serverId:e.serverId,isShowProgressTips:0==e.isShowProgressTips?0:1},e)},getNetworkType:function(e){var t=function(e){var t,i,n,o=e.errMsg;if(e.errMsg="getNetworkType:ok",t=e.subtype,delete e.subtype,t)e.networkType=t;else switch(i=o.indexOf(":"),n=o.substring(i+1)){case"wifi":case"edge":case"wwan":e.networkType=n;break;default:e.errMsg="getNetworkType:fail"}return e};i("getNetworkType",{},function(){return e._complete=function(e){e=t(e)},e}())},openLocation:function(e){i("openLocation",{latitude:e.latitude,longitude:e.longitude,name:e.name||"",address:e.address||"",scale:e.scale||28,infoUrl:e.infoUrl||""},e)},getLocation:function(e){e=e||{},i(m.getLocation,{type:e.type||"wgs84"},function(){return e._complete=function(e){delete e.type},e}())},hideOptionMenu:function(e){i("hideOptionMenu",{},e)},showOptionMenu:function(e){i("showOptionMenu",{},e)},closeWindow:function(e){e=e||{},i("closeWindow",{immediate_close:e.immediateClose||0},e)},hideMenuItems:function(e){i("hideMenuItems",{menuList:e.menuList},e)},showMenuItems:function(e){i("showMenuItems",{menuList:e.menuList},e)},hideAllNonBaseMenuItem:function(e){i("hideAllNonBaseMenuItem",{},e)},showAllNonBaseMenuItem:function(e){i("showAllNonBaseMenuItem",{},e)},scanQRCode:function(e){e=e||{},i("scanQRCode",{needResult:e.needResult||0,scanType:e.scanType||["qrCode","barCode"]},function(){return e._complete=function(e){var t,i;b&&(t=e.resultStr,t&&(i=JSON.parse(t),e.resultStr=i&&i.scan_code&&i.scan_code.scan_result))},e}())},openProductSpecificView:function(e){i(m.openProductSpecificView,{pid:e.productId,view_type:e.viewType||0},e)},addCard:function(e){var t,n,o,s,a=e.cardList,c=[];for(t=0,n=a.length;n>t;++t)o=a[t],s={card_id:o.cardId,card_ext:o.cardExt},c.push(s);i(m.addCard,{card_list:c},function(){return e._complete=function(e){var t,i,n,o=e.card_list;if(o){for(o=JSON.parse(o),t=0,i=o.length;i>t;++t)n=o[t],n.cardId=n.card_id,n.cardExt=n.card_ext,n.isSuccess=!!n.is_succ,delete n.card_id,delete n.card_ext,delete n.is_succ;e.cardList=o,delete e.card_list}},e}())},chooseCard:function(e){i("chooseCard",{app_id:C.appId,location_id:e.shopId||"",sign_type:e.signType||"SHA1",card_id:e.cardId||"",card_type:e.cardType||"",card_sign:e.cardSign,time_stamp:e.timestamp+"",nonce_str:e.nonceStr},function(){return e._complete=function(e){e.cardList=e.choose_card_info,delete e.choose_card_info},e}())},openCard:function(e){var t,n,o,s,a=e.cardList,c=[];for(t=0,n=a.length;n>t;++t)o=a[t],s={card_id:o.cardId,code:o.code},c.push(s);i(m.openCard,{card_list:c},e)},chooseWXPay:function(e){i(m.chooseWXPay,s(e),e)}},t&&(e.wx=e.jWeixin=x)}(window,!0),t["a"]=window.wx},"7f7f":function(e,t,i){var n=i("86cc").f,o=Function.prototype,s=/^\s*function ([^ (]*)/,a="name";a in o||i("9e1e")&&n(o,a,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},8649:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"body"},[i("div",{staticClass:"msg"},[i("div",{staticClass:"img"},[i("img",{attrs:{src:e.goods.img}})]),i("div",{staticClass:"text"},[i("div",{staticClass:"title"},[e._v(e._s(e.goods.title))]),i("div",{staticClass:"intro"},[e._v(e._s(e.goods.intro))])]),i("div",{staticClass:"price"},[e._v("￥"+e._s(e.price))])]),i("div",{staticClass:"input-body"},[e.goods.attribute?i("div",{staticClass:"input-group"},[i("div",{staticClass:"input-left"},[e._v("方式")]),i("div",{staticClass:"input-right"},[i("div",{staticClass:"in-group"},e._l(e.goods.attribute,function(t,n){return i("div",{key:n},[i("div",{staticClass:"input-cell",class:e.aid==n?"active":"",on:{click:function(t){e.achange(n)}}},[e._v("\n                                "+e._s(t.name)+"\n                            ")])])}),0)])]):e._e(),e.goods.service?i("div",{staticClass:"input-group"},[i("div",{staticClass:"input-left"},[e._v("讲解")]),i("div",{staticClass:"input-right"},[i("div",{staticClass:"in-group"},e._l(e.goods.service,function(t,n){return i("div",{key:n},[i("div",{staticClass:"input-cell",class:e.sid==n?"active":"",on:{click:function(t){e.schange(n)}}},[e._v("\n                                "+e._s(t.name)+"\n                            ")])])}),0)])]):e._e(),i("div",{staticClass:"input-group"},[i("div",{staticClass:"input-left"},[e._v("人数")]),i("div",{staticClass:"input-right"},[i("div",{staticClass:"stepper"},[i("span",{class:e.minusStatus,staticStyle:{"border-right":"1px solid #ccc"},attrs:{type:"number"},on:{click:e.bindMinus}},[e._v("-")]),i("input",{attrs:{disabled:"true"},domProps:{value:e.num}}),i("span",{staticStyle:{"border-left":"1px solid #ccc"},on:{click:e.bindPlus}},[e._v("+")])])])]),i("div",{staticClass:"input-group"},[i("div",{staticClass:"input-left"},[e._v("优惠券")]),i("div",{staticClass:"input-right"},[e.myCp?i("div",{staticClass:"coupons"},[i("span",{staticClass:"t1"},[e._v("-￥"+e._s(e.coupon))])]):i("div",{staticClass:"coupons"},[i("span",{staticClass:"t2"},[e._v("暂无可用")])])])]),i("div",{staticClass:"sum"},[i("span",{staticClass:"sum-text1"},[e._v("小计：")]),i("span",{staticClass:"sum-text2"},[e._v("￥"+e._s(e.total))])])])]),i("div",{staticClass:"sub"},[i("div",{staticClass:"subbtn",on:{click:function(t){e.btnClicked&&e.sub()}}},[e._v("提交订单")])])])},o=[],s=(i("7f7f"),i("cadf"),i("551c"),i("097d"),i("c40e")),a=i("1246"),c={name:"detail",data:function(){return{uid:0,oid:0,openid:"",goods:[],num:1,minusStatus:"disable",myCp:!1,aid:0,price:0,dprice:0,sid:0,sprice:0,coupon:0,couponid:0,total:0,sname:"",aname:"",btnClicked:!0}},created:function(){this.getDetailInfo()},methods:{getDetailInfo:function(){var e=this,t={id:this.$route.params.id,uid:localStorage.getItem("uid")};Object(s["b"])(t).then(function(i){var n=i.data;e.uid=t.uid,e.goods=n.data.goods,e.myCp=n.data.myCp,e.price=n.data.goods.price,e.dprice=n.data.goods.price,n.data.myCp&&(e.coupon=n.data.coupons.price,e.couponid=n.data.coupons.id),e.calu()})},bindMinus:function(){var e=this.num;e>1&&e--;var t=e>1?"normal":"disable";this.num=e,this.minusStatus=t,this.calu()},bindPlus:function(){var e=this.num;e++;var t=e>1?"normal":"disable";this.num=e,this.minusStatus=t,this.calu()},tohome:function(){this.$router.push("/")},achange:function(e){this.aid=e,this.calu()},schange:function(e){this.sid=e,this.calu()},aSet:function(){var e=this.aid;if(this.goods.attribute){var t=this.goods.attribute[e];this.aname=t.name,this.price=t.price,this.dprice=t.dprice}},sSet:function(){var e=this.sid;if(this.goods.service){var t=this.goods.service[e];this.sname=t.name,this.sprice=t.price}},calu:function(){var e,t=this;t.aSet(),t.sSet(),e=this.price,e+=this.sprice,e+=this.dprice*(this.num-1),e-=this.coupon,this.total=e},sub:function(){var e=this,t=this;t.btnClicked=!1;var i=new URLSearchParams;i.append("uid",t.uid),i.append("gid",t.goods.id),i.append("num",t.num),i.append("price",100*t.total),i.append("type1",t.aname),i.append("type2",t.sname),i.append("cid",t.couponid),Object(s["c"])(i).then(function(i){e.oid=i.data.data,t.pay()})},pay:function(){var e=new URLSearchParams;e.append("openid",localStorage.getItem("openid")),e.append("total_fee",1),e.append("attach",this.oid),e.append("body","好好选课--充值"),Object(s["e"])(e).then(function(e){var t=e.data;a["a"].config({debug:!0,appId:t.appId,timestamp:t.timeStamp,nonceStr:t.nonceStr,signature:t.paySign,jsApiList:["chooseWXPay"]}),a["a"].chooseWXPay({timestamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:"MD5",paySign:t.paySign,success:function(e){"chooseWXPay:ok"==e.errMsg?(this.$toast({message:"支付成功！",type:"",position:"bottom",duration:"2000"}),this.$router.push("/ui/my")):(this.$toast({message:"支付失败，请重新支付！",type:"",position:"bottom",duration:"2000"}),this.$router.push("/ui/my"))},cancel:function(e){this.$toast({message:"支付被取消，请重新支付！",type:"",position:"bottom",duration:"2000"}),this.$router.push("/ui/my")}})})}}},r=c,u=(i("903d"),i("2877")),d=Object(u["a"])(r,n,o,!1,null,"57abf0ce",null);d.options.__file="buy.vue";t["default"]=d.exports},"903d":function(e,t,i){"use strict";var n=i("b831"),o=i.n(n);o.a},b831:function(e,t,i){},c40e:function(e,t,i){"use strict";i.d(t,"d",function(){return o}),i.d(t,"b",function(){return s}),i.d(t,"a",function(){return a}),i.d(t,"c",function(){return c}),i.d(t,"e",function(){return r}),i.d(t,"f",function(){return u});var n=i("b775");function o(){return Object(n["a"])({url:"/goods/index",method:"get",params:""})}function s(e){return Object(n["a"])({url:"/goods/getGoodById",method:"get",params:e})}function a(e){return Object(n["a"])({url:"/goods/receiveCoupons",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/user/orderGoods",method:"post",data:e})}function r(e){return Object(n["a"])({url:"/getSignWxPay",method:"post",data:e})}function u(e){return Object(n["a"])({url:"/message/leaveMessage",method:"post",data:e})}}}]);